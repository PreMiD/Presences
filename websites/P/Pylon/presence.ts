const presence = new Presence({
		clientId: "779062000412000307",
	});

	const enum Assets {
		Pylon = "https://cdn.discordapp.com/app-assets/779062000412000307/779071954808209418.png?size=512",
		Ahk = "https://cdn.discordapp.com/app-assets/779062000412000307/779072073514745898.png?size=512",
		Angular = "https://cdn.discordapp.com/app-assets/779062000412000307/779072073645424691.png?size=512",
		Applescript = "https://cdn.discordapp.com/app-assets/779062000412000307/779072073673998356.png?size=512",
		Android = "https://cdn.discordapp.com/app-assets/779062000412000307/779072073700081664.png?size=512",
		Appveyor = "https://cdn.discordapp.com/app-assets/779062000412000307/779072073845964891.png?size=512",
		Arduino = "https://cdn.discordapp.com/app-assets/779062000412000307/779072074551001119.png?size=512",
		As = "https://cdn.discordapp.com/app-assets/779062000412000307/779072074844078180.png?size=512",
		Autoit = "https://cdn.discordapp.com/app-assets/779062000412000307/779072074915774534.png?size=512",
		Asp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072074915774574.png?size=512",
		Assembly = "https://cdn.discordapp.com/app-assets/779062000412000307/779072076342362112.png?size=512",
		Bat = "https://cdn.discordapp.com/app-assets/779062000412000307/779072079633973248.png?size=512",
		Bower = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080406249492.png?size=512",
		Cmake = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080742055986.png?size=512",
		Clojure = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080829218817.png?size=512",
		Circleci = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080842981396.png?size=512",
		C = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080858841119.png?size=512",
		Cargo = "https://cdn.discordapp.com/app-assets/779062000412000307/779072080951640095.png?size=512",
		Env = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081491918898.png?size=512",
		Flowconfig = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081618141184.png?size=512",
		Cssmap = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081618534400.png?size=512",
		Cshtml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081743839262.png?size=512",
		Firebase = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081924456499.png?size=512",
		Crystal = "https://cdn.discordapp.com/app-assets/779062000412000307/779072081966530582.png?size=512",
		Eslint = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082013061201.png?size=512",
		Git = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082075451422.png?size=512",
		Elm = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082100092988.png?size=512",
		D = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082155667467.png?size=512",
		Denizen = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082185158667.png?size=512",
		Dart = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082197086248.png?size=512",
		Csharp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082201018399.png?size=512",
		Elixir = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082222514186.png?size=512",
		Css = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082230771712.png?size=512",
		Dm = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082259869737.png?size=512",
		Docker = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082267865098.png?size=512",
		Haskell = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082276515862.png?size=512",
		Ejs = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082276646973.png?size=512",
		Cuda = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082294079548.png?size=512",
		Fsharp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082352275477.png?size=512",
		Gemfile = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082381242418.png?size=512",
		Gradle = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082389893160.png?size=512",
		Go = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082399068231.png?size=512",
		Coffee = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082436685854.png?size=512",
		Brainfuck = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082439831612.png?size=512",
		Erlang = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082444812358.png?size=512",
		Gatsbyjs = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082549145630.png?size=512",
		Graphql = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082582437948.png?size=512",
		Cpp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082586632213.png?size=512",
		Godot = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082709315644.png?size=512",
		Log = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082864504834.png?size=512",
		Livescript = "https://cdn.discordapp.com/app-assets/779062000412000307/779072082964906046.png?size=512",
		Heroku = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083044728832.png?size=512",
		Handlebars = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083136348180.png?size=512",
		Npm = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083241205821.png?size=512",
		Jsmap = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083590119454.png?size=512",
		Hjson = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083761823755.png?size=512",
		Html = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083815825430.png?size=512",
		Markdown = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083888046140.png?size=512",
		Manifest = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083920814090.png?size=512",
		Markdownx = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083946242129.png?size=512",
		Json = "https://cdn.discordapp.com/app-assets/779062000412000307/779072083996573707.png?size=512",
		Gruntfile = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084017938493.png?size=512",
		Toml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084054769689.png?size=512",
		Harbour = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084109557820.png?size=512",
		Js = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084201439243.png?size=512",
		Gulp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084240236567.png?size=512",
		Makefile = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084403159061.png?size=512",
		Reasonml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084415742022.png?size=512",
		Shell = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084608811038.png?size=512",
		Nim = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084650622977.png?size=512",
		Julia = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084667793458.png?size=512",
		Editorconfig = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084676444201.png?size=512",
		Text = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084696629308.png?size=512",
		Jest = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084696629309.png?size=512",
		Ts = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084801748993.png?size=512",
		Xml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084814069812.png?size=512",
		Haxe = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084852211712.png?size=512",
		Yaml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072084865187851.png?size=512",
		Tex = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085166915644.png?size=512",
		Wasm = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085192081428.png?size=512",
		Prisma = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085196668959.png?size=512",
		Vcxproj = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085250408508.png?size=512",
		Kotlin = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085259583579.png?size=512",
		Nodemon = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085342945292.png?size=512",
		R = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085402058762.png?size=512",
		Ocaml = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085414641706.png?size=512",
		Powershell = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085418835978.png?size=512",
		Svg = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085443477537.png?size=512",
		Delphi = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085473362012.png?size=512",
		Python = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085477556234.png?size=512",
		Sql = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085501804564.png?size=512",
		Http = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085527101470.png?size=512",
		V = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085544402965.png?size=512",
		Yarn = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085544665148.png?size=512",
		Txt = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085560655882.png?size=512",
		Zig = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085632483328.png?size=512",
		Groovy = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085649522688.png?size=512",
		Marko = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085653585982.png?size=512",
		Prettier = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085698936832.png?size=512",
		Php = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085703000064.png?size=512",
		Twig = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085775089674.png?size=512",
		Swift = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085782954024.png?size=512",
		Lua = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085804711966.png?size=512",
		Purescript = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085841543168.png?size=512",
		Vue = "https://cdn.discordapp.com/app-assets/779062000412000307/779072085875359764.png?size=512",
		Java = "https://cdn.discordapp.com/app-assets/779062000412000307/779072124752756757.png?size=512",
		Less = "https://cdn.discordapp.com/app-assets/779062000412000307/779072124798894133.png?size=512",
		Jsx = "https://cdn.discordapp.com/app-assets/779062000412000307/779072124881993768.png?size=512",
		Jupyter = "https://cdn.discordapp.com/app-assets/779062000412000307/779072124945039390.png?size=512",
		Lisp = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125037707274.png?size=512",
		Perl = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125050814485.png?size=512",
		Objc = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125096558612.png?size=512",
		Pascal = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125163012157.png?size=512",
		Pawn = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125176512533.png?size=512",
		Postcss = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125687955466.png?size=512",
		Pug = "https://cdn.discordapp.com/app-assets/779062000412000307/779072125922443355.png?size=512",
		Vba = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126510563439.png?size=512",
		Vscodeignore = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126677811202.png?size=512",
		Tsx = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126711758850.png?size=512",
		Vb = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126820024341.png?size=512",
		Sqf = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126832738374.png?size=512",
		Svelte = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126904041472.png?size=512",
		Ruby = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126908891186.png?size=512",
		Scala = "https://cdn.discordapp.com/app-assets/779062000412000307/779072126954897408.png?size=512",
		Stylus = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127000641597.png?size=512",
		Webpack = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127005360128.png?size=512",
		Vala = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127025283122.png?size=512",
		Travis = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127046385684.png?size=512",
		Rust = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127072337982.png?size=512",
		Scss = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127155568640.png?size=512",
		Ponylang = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127180472350.png?size=512",
		Processing = "https://cdn.discordapp.com/app-assets/779062000412000307/779072127344967710.png?size=512",
		Pylond = "https://cdn.discordapp.com/app-assets/779062000412000307/779072756650082314.png?size=512",
		Idle = "https://cdn.discordapp.com/app-assets/779062000412000307/779103877374541874.png?size=512",
	}

// https://github.com/iCrawl/discord-vscode/blob/master/src/data/languages.json
const knownExtensions: { [key: string]: { image: string } } = {
		".ahk": { image: Assets.Ahk },
		".ahkl": { image: Assets.Ahk },
		"androidmanifest.xml": { image: Assets.Android },
		"/^angular[^.]*\\.js$/i": { image: Assets.Angular },
		".applescript": { image: Assets.Applescript },
		"/(\\.)?appveyor\\.yml/i": { image: Assets.Appveyor },
		".ino": { image: Assets.Arduino },
		".swf": { image: Assets.As },
		".as": { image: Assets.As },
		".jsfl": { image: Assets.As },
		".swc": { image: Assets.As },
		".asp": { image: Assets.Asp },
		".asax": { image: Assets.Asp },
		".ascx": { image: Assets.Asp },
		".ashx": { image: Assets.Asp },
		".asmx": { image: Assets.Asp },
		".aspx": { image: Assets.Asp },
		".axd": { image: Assets.Asp },
		"/\\.setTrayTitle(l?a|[ls]?o|out|s|a51|asm|axf|elf|prx|puff|z80)$/i": {
			image: Assets.Assembly,
		},
		".agc": { image: Assets.Assembly },
		".ko": { image: Assets.Assembly },
		".lst": { image: Assets.Assembly },
		"/\\.setTrayTitle((c([+px]{2}?)?-?)?objdump|bsdiff|bin|dat|pak|pdb)$/i": {
			image: Assets.Assembly,
		},
		".d-objdump": { image: Assets.Assembly },
		"/\\.gcode|\\.gco/i": { image: Assets.Assembly },
		"/\\.rpy[bc]$/i": { image: Assets.Assembly },
		"/\\.py[co]$/i": { image: Assets.Assembly },
		".swp": { image: Assets.Assembly },
		".DS_Store": { image: Assets.Assembly },
		".au3": { image: "autoit" },
		"babel.config.js": { image: Assets.Text },
		"/\\.babelrc/i": { image: Assets.Text },
		".bat": { image: Assets.Bat },
		".batch": { image: Assets.Bat },
		".cmd": { image: Assets.Bat },
		"/\\.setTrayTitle(exe|com|msi)$/i": { image: Assets.Bat },
		".reg": { image: Assets.Bat },
		"/^(\\.bowerrc|bower\\.json|Bowerfile)$/i": { image: Assets.Bower },
		"/\\.bf?$/i": { image: Assets.Brainfuck },
		"/\\.c$/i": { image: Assets.C },
		"/(cargo.toml|cargo.lock)/i": { image: Assets.Cargo },
		"circle.yml": { image: Assets.Circleci },
		".clj": { image: Assets.Clojure },
		".cl2": { image: Assets.Clojure },
		".cljc": { image: Assets.Clojure },
		".cljx": { image: Assets.Clojure },
		".hic": { image: Assets.Clojure },
		"/\\.cljs(cm)?$/i": { image: Assets.Clojure },
		".cmake": { image: Assets.Cmake },
		"/^CMakeLists\\.txt$/": { image: Assets.Cmake },
		"/\\.codeclimate\\.setTrayTitle(yml|json)/i": { image: Assets.Text },
		".coffee": { image: Assets.Coffee },
		".cjsx": { image: Assets.Coffee },
		".coffee.ecr": { image: Assets.Coffee },
		".coffee.erb": { image: Assets.Coffee },
		".litcoffee": { image: Assets.Coffee },
		".iced": { image: Assets.Coffee },
		"/\\.c[+px]{2}$|\\.cc$/i": { image: Assets.Cpp },
		"/\\.h[+px]{2}$/i": { image: Assets.Cpp },
		"/\\.[it]pp$/i": { image: Assets.Cpp },
		"/\\.setTrayTitle(tcc|inl)$/i": { image: Assets.Cpp },
		".cats": { image: Assets.Cpp },
		".idc": { image: Assets.Cpp },
		".w": { image: Assets.Cpp },
		".nc": { image: Assets.Cpp },
		".upc": { image: Assets.Cpp },
		".xpm": { image: Assets.Cpp },
		"/\\.e?cr$/i": { image: Assets.Crystal },
		".cs": { image: Assets.Csharp },
		".csx": { image: Assets.Csharp },
		".cshtml": { image: Assets.Cshtml },
		".css.map": { image: Assets.Cssmap },
		".cu": { image: Assets.Cuda },
		"/\\.di?$/i": { image: Assets.D },
		".dart": { image: Assets.Dart },
		".dfm": { image: Assets.Delphi },
		".dpr": { image: Assets.Delphi },
		".dsc": { image: Assets.Denizen },
		".dm": { image: Assets.Dm },
		".dme": { image: Assets.Dm },
		".dmm": { image: Assets.Dm },
		"/^(Dockerfile|docker-compose)|\\.docker(file|ignore)$/i": {
			image: Assets.Docker,
		},
		"/^docker-sync\\.yml$/i": { image: Assets.Docker },
		".editorconfig": { image: Assets.Editorconfig },
		".ejs": { image: Assets.Ejs },
		".ex": { image: Assets.Elixir },
		"/\\.setTrayTitle(exs|l?eex)$/i": { image: Assets.Elixir },
		"/^mix\\.setTrayTitle(exs?|lock)$/i": { image: Assets.Elixir },
		".elm": { image: Assets.Elm },
		".env": { image: Assets.Env },
		".erl": { image: Assets.Erlang },
		".beam": { image: Assets.Erlang },
		".hrl": { image: Assets.Erlang },
		".xrl": { image: Assets.Erlang },
		".yrl": { image: Assets.Erlang },
		".app.src": { image: Assets.Erlang },
		"/^Emakefile$/": { image: Assets.Erlang },
		"/^rebar(\\.config)?\\.lock$/i": { image: Assets.Erlang },
		"/\\.setTrayTitle(eslintrc|eslintignore)/i": { image: Assets.Eslint },
		"/(\\.firebaserc|firebase\\.json)/i": { image: Assets.Firebase },
		".flowconfig": { image: Assets.Flowconfig },
		".fs": { image: Assets.Fsharp },
		".fsi": { image: Assets.Fsharp },
		".fsscript": { image: Assets.Fsharp },
		".fsx": { image: Assets.Fsharp },
		"/gatsby-(browser|node|ssr|config)\\.js/i": { image: Assets.Gatsbyjs },
		"/^Gemfile(\\.lock)?$/i": { image: Assets.Gemfile },
		"/^\\.git|^\\.keep$|\\.mailmap$/i": { image: Assets.Git },
		".go": { image: Assets.Go },
		".gd": { image: Assets.Godot },
		".gradle": { image: Assets.Gradle },
		gradlew: { image: Assets.Gradle },
		".gql": { image: Assets.Graphql },
		".graphql": { image: Assets.Graphql },
		".groovy": { image: Assets.Groovy },
		".gvy": { image: Assets.Groovy },
		".gy": { image: Assets.Groovy },
		".gsh": { image: Assets.Groovy },
		"/gruntfile\\.setTrayTitle(js|coffee)/i": { image: Assets.Gruntfile },
		"gulpfile.js": { image: Assets.Gulp },
		"/\\.setTrayTitle(hbs|handlebars|(mu)?stache)$/i": { image: Assets.Handlebars },
		".prg": { image: Assets.Harbour },
		".hbp": { image: Assets.Harbour },
		".hbc": { image: Assets.Harbour },
		".rc": { image: Assets.Harbour },
		".fmg": { image: Assets.Harbour },
		".hs": { image: Assets.Haskell },
		".hsc": { image: Assets.Haskell },
		".c2hs": { image: Assets.Haskell },
		".lhs": { image: Assets.Haskell },
		".hx": { image: Assets.Haxe },
		".hxml": { image: Assets.Haxe },
		"/^procfile/i": { image: Assets.Heroku },
		"heroku.yml": { image: Assets.Heroku },
		".hjson": { image: Assets.Hjson },
		"/\\.x?html?$/i": { image: Assets.Html },
		".http": { image: Assets.Http },
		".rest": { image: Assets.Http },
		".jar": { image: Assets.Java },
		".java": { image: Assets.Java },
		"jest.config.js": { image: Assets.Jest },
		".es6": { image: Assets.Js },
		".es": { image: Assets.Js },
		".mjs": { image: Assets.Js },
		".js.map": { image: Assets.Jsmap },
		".jsonc": { image: Assets.Json },
		".jsx": { image: Assets.Jsx },
		"/\\.setTrayTitle(jil|jl)/i": { image: Assets.Julia },
		".ipynb": { image: Assets.Jupyter },
		".kt": { image: Assets.Kotlin },
		".ktm": { image: Assets.Kotlin },
		".kts": { image: Assets.Kotlin },
		".less": { image: Assets.Less },
		".lsp": { image: Assets.Lisp },
		".lisp": { image: Assets.Lisp },
		".l": { image: Assets.Lisp },
		".nl": { image: Assets.Lisp },
		".ny": { image: Assets.Lisp },
		".podsl": { image: Assets.Lisp },
		".sexp": { image: Assets.Lisp },
		".ls": { image: Assets.Livescript },
		".log": { image: Assets.Log },
		".lua": { image: Assets.Lua },
		".pd_lua": { image: Assets.Lua },
		".rbxs": { image: Assets.Lua },
		".wlua": { image: Assets.Lua },
		"/^Makefile/": { image: Assets.Makefile },
		"/^mk\\.config$/": { image: Assets.Makefile },
		"/\\.setTrayTitle(mk|mak|make)$/i": { image: Assets.Makefile },
		"/^BSDmakefile$/i": { image: Assets.Makefile },
		"/^GNUmakefile$/i": { image: Assets.Makefile },
		"/^makefile\\.sco$/i": { image: Assets.Makefile },
		"/^Kbuild$/": { image: Assets.Makefile },
		"/^makefile$/": { image: Assets.Makefile },
		"/^mkfile$/i": { image: Assets.Makefile },
		"/^\\.?qmake$/i": { image: Assets.Makefile },
		"/\\.setTrayTitle(h|geo|topo)$/i": { image: Assets.Manifest },
		".cson": { image: Assets.Manifest },
		".json5": { image: Assets.Manifest },
		".ndjson": { image: Assets.Manifest },
		".fea": { image: Assets.Manifest },
		".json.eex": { image: Assets.Manifest },
		".proto": { image: Assets.Manifest },
		".pytb": { image: Assets.Manifest },
		".pydeps": { image: Assets.Manifest },
		"/\\.pot?$/i": { image: Assets.Manifest },
		".ejson": { image: Assets.Manifest },
		".edn": { image: Assets.Manifest },
		".eam.fs": { image: Assets.Manifest },
		".qml": { image: Assets.Manifest },
		".qbs": { image: Assets.Manifest },
		".ston": { image: Assets.Manifest },
		".ttl": { image: Assets.Manifest },
		".rviz": { image: Assets.Manifest },
		".syntax": { image: Assets.Manifest },
		".webmanifest": { image: Assets.Manifest },
		"/^pkginfo$/": { image: Assets.Manifest },
		"/^mime\\.types$/i": { image: Assets.Manifest },
		"/^METADATA\\.pb$/": { image: Assets.Manifest },
		"/[\\/\\\\](?:magic[\\/\\\\]Magdir|file[\\/\\\\]magic)[\\/\\\\][-.\\w]+$/i":
			{
				image: Assets.Manifest,
			},
		"/(\\\\|\\/)dev[-\\w]+\\1(?:[^\\\\\\/]+\\1)*(?!DESC|NOTES)(?:[A-Z][-A-Z]*)(?:\\.in)?$/":
			{
				image: Assets.Manifest,
			},
		"lib/icons/.icondb.js": { image: Assets.Manifest },
		"/\\.git[\\/\\\\](.*[\\/\\\\])?(HEAD|ORIG_HEAD|packed-refs|logs[\\/\\\\](.+[\\/\\\\])?[^\\/\\\\]+)$/":
			{
				image: Assets.Manifest,
			},
		"/\\.setTrayTitle(md|mdown|markdown|mkd|mkdown|mdwn|mkdn|rmd|ron|pmd)$/i": {
			image: "markdown",
		},
		".mdx": { image: Assets.Markdownx },
		".marko": { image: Assets.Marko },
		".nim": { image: Assets.Nim },
		".nims": { image: Assets.Nim },
		".nimble": { image: Assets.Nim },
		".nix": { image: Assets.Nim },
		"nodemon.json": { image: Assets.Nodemon },
		".npmrc": { image: Assets.Npm },
		"/\\.mm?$/i": { image: Assets.Objc },
		".pch": { image: Assets.Objc },
		".x": { image: Assets.Objc },
		".ml": { image: Assets.Ocaml },
		".mli": { image: Assets.Ocaml },
		".eliom": { image: Assets.Ocaml },
		".eliomi": { image: Assets.Ocaml },
		".ml4": { image: Assets.Ocaml },
		".mll": { image: Assets.Ocaml },
		".mly": { image: Assets.Ocaml },
		"/\\.pas(cal)?$/i": { image: Assets.Pascal },
		".lpr": { image: Assets.Pascal },
		".p": { image: Assets.Pawn },
		".inc": { image: Assets.Pawn },
		".sma": { image: Assets.Pawn },
		".pwn": { image: Assets.Pawn },
		".sp": { image: Assets.Pawn },
		"/\\.p(er)?l$/i": { image: Assets.Perl },
		".al": { image: Assets.Perl },
		".ph": { image: Assets.Perl },
		".plx": { image: Assets.Perl },
		".pm": { image: Assets.Perl },
		"/\\.setTrayTitle(psgi|xs)$/i": { image: Assets.Perl },
		".pl6": { image: Assets.Perl },
		"/\\.[tp]6$|\\.6pl$/i": { image: Assets.Perl },
		"/\\.setTrayTitle(pm6|p6m)$/i": { image: Assets.Perl },
		".6pm": { image: Assets.Perl },
		".nqp": { image: Assets.Perl },
		".p6l": { image: Assets.Perl },
		".pod6": { image: Assets.Perl },
		"/^Rexfile$/": { image: Assets.Perl },
		"/\\.php([st\\d]|_cs)?$/i": { image: Assets.Php },
		"/^Phakefile/": { image: Assets.Php },
		".pony": { image: Assets.Ponylang },
		".pcss": { image: Assets.Postcss },
		".ps1": { image: Assets.Powershell },
		".psd1": { image: Assets.Powershell },
		".psm1": { image: Assets.Powershell },
		".ps1xml": { image: Assets.Powershell },
		".prettierignore": { image: Assets.Prettier },
		"/\\.prettier((rc)|(\\.setTrayTitle(toml|yml|yaml|json|js))?$){2}/i": {
			image: Assets.Prettier,
		},
		"prettier.config.js": { image: Assets.Prettier },
		"prisma.yml": { image: Assets.Prisma },
		".pde": { image: Assets.Processing },
		".jade": { image: Assets.Pug },
		".pug": { image: Assets.Pug },
		".purs": { image: Assets.Purescript },
		".py": { image: Assets.Python },
		".ipy": { image: Assets.Python },
		".isolate": { image: Assets.Python },
		".pep": { image: Assets.Python },
		".gyp": { image: Assets.Python },
		".gypi": { image: Assets.Python },
		".pyde": { image: Assets.Python },
		".pyp": { image: Assets.Python },
		".pyt": { image: Assets.Python },
		".py3": { image: Assets.Python },
		".pyi": { image: Assets.Python },
		".pyw": { image: Assets.Python },
		".tac": { image: Assets.Python },
		".wsgi": { image: Assets.Python },
		".xpy": { image: Assets.Python },
		".rpy": { image: Assets.Python },
		"/\\.?(pypirc|pythonrc|python-venv)$/i": { image: Assets.Python },
		"/^(SConstruct|SConscript)$/": { image: Assets.Python },
		"/^(Snakefile|WATCHLISTS)$/": { image: Assets.Python },
		"/^wscript$/": { image: Assets.Python },
		"/\\.setTrayTitle(r|Rprofile|rsx|rd)$/i": { image: Assets.R },
		".re": { image: Assets.Reasonml },
		"/\\.setTrayTitle(rb|ru|ruby|erb|gemspec|god|mspec|pluginspec|podspec|rabl|rake|opal)$/i":
			{
				image: Assets.Ruby,
			},
		"/^\\.?(irbrc|gemrc|pryrc|ruby-(gemset|version))$/i": { image: Assets.Ruby },
		"/^(Appraisals|(Rake|[bB]uild|Cap|Danger|Deliver|Fast|Guard|Jar|Maven|Pod|Puppet|Snap)file(\\.lock)?)$/":
			{
				image: Assets.Ruby,
			},
		"/\\.setTrayTitle(jbuilder|rbuild|rb[wx]|builder)$/i": { image: Assets.Ruby },
		"/^rails$/": { image: Assets.Ruby },
		".watchr": { image: Assets.Ruby },
		".rs": { image: Assets.Rust },
		"/\\.setTrayTitle(sc|scala)$/i": { image: Assets.Scala },
		".scss": { image: Assets.Scss },
		".sass": { image: Assets.Scss },
		"/\\.setTrayTitle(sh|rc|bats|bash|tool|install|command)$/i": {
			image: Assets.Shell,
		},
		"/^(\\.?bash(rc|[-_]?(profile|login|logout|history|prompt))|_osc|config|install-sh|PKGBUILD)$/i":
			{
				image: Assets.Shell,
			},
		"/\\.setTrayTitle(ksh|mksh|pdksh)$/i": { image: Assets.Shell },
		".sh-session": { image: Assets.Shell },
		"/\\.zsh(-theme|_history)?$|^\\.?(antigen|zpreztorc|zlogin|zlogout|zprofile|zshenv|zshrc)$/i":
			{
				image: Assets.Shell,
			},
		"/\\.fish$|^\\.fishrc$/i": { image: Assets.Shell },
		"/^\\.?(login|profile)$/": { image: Assets.Shell },
		".inputrc": { image: Assets.Shell },
		".tmux": { image: Assets.Shell },
		"/^(configure|config\\.setTrayTitle(guess|rpath|status|sub)|depcomp|libtool|compile)$/":
			{
				image: Assets.Shell,
			},
		"/^\\/(private\\/)?etc\\/([^\\/]+\\/)*(profile$|nanorc$|rc\\.|csh\\.)/i": {
			image: Assets.Shell,
		},
		"/^\\.?cshrc$/i": { image: Assets.Shell },
		".profile": { image: Assets.Shell },
		".tcsh": { image: Assets.Shell },
		".csh": { image: Assets.Shell },
		".sqf": { image: Assets.Sqf },
		"/\\.setTrayTitle(my)?sql$/i": { image: Assets.Sql },
		".ddl": { image: Assets.Sql },
		".udf": { image: Assets.Sql },
		".hql": { image: Assets.Sql },
		".viw": { image: Assets.Sql },
		".prc": { image: Assets.Sql },
		".cql": { image: Assets.Sql },
		".db2": { image: Assets.Sql },
		"/\\.setTrayTitle(styl|stylus)$/i": { image: Assets.Stylus },
		".svelte": { image: Assets.Svelte },
		".svg": { image: Assets.Svg },
		".swift": { image: Assets.Swift },
		".tex": { image: Assets.Tex },
		".ltx": { image: Assets.Tex },
		".aux": { image: Assets.Tex },
		".sty": { image: Assets.Tex },
		".dtx": { image: Assets.Tex },
		".cls": { image: Assets.Tex },
		".ins": { image: Assets.Tex },
		".lbx": { image: Assets.Tex },
		".mkiv": { image: Assets.Tex },
		".mkvi": { image: Assets.Tex },
		".mkii": { image: Assets.Tex },
		".texi": { image: Assets.Tex },
		"/^hyphen(ex)?\\.setTrayTitle(cs|den|det|fr|sv|us)$/": { image: Assets.Tex },
		"/\\.te?xt$/i": { image: Assets.Text },
		".rtf": { image: Assets.Text },
		"/\\.i?nfo$/i": { image: Assets.Text },
		".msg": { image: Assets.Text },
		"/\\.setTrayTitle(utxt|utf8)$/i": { image: Assets.Text },
		".toml": { image: Assets.Toml },
		".travis.yml": { image: Assets.Travis },
		".ts": { image: Assets.Ts },
		".tsx": { image: Assets.Tsx },
		".twig": { image: Assets.Twig },
		".v": { image: Assets.V },
		".vh": { image: Assets.V },
		".vala": { image: Assets.Vala },
		".vapi": { image: Assets.Vala },
		".vb": { image: Assets.Vb },
		".vbs": { image: Assets.Vb },
		".vbhtml": { image: Assets.Vb },
		".vbproj": { image: Assets.Vb },
		".vba": { image: Assets.Vba },
		".vcxproj": { image: Assets.Vcxproj },
		".vscodeignore": { image: Assets.Vscodeignore },
		".vue": { image: Assets.Vue },
		".wat": { image: Assets.Wasm },
		".wast": { image: Assets.Wasm },
		".wasm": { image: Assets.Wasm },
		"/webpack(\\.dev|\\.development|\\.prod|\\.production)?\\.config(\\.babel)?\\.setTrayTitle(js|jsx|coffee|ts|json|json5|yaml|yml)/i":
			{
				image: Assets.Webpack,
			},
		".xml": { image: Assets.Xml },
		"/\\.ya?ml$/i": { image: Assets.Yaml },
		"/^yarn(\\.lock)?$/i": { image: Assets.Yarn },
		".yarnrc": { image: Assets.Yarn },
		".zig": { image: Assets.Zig },

		".json": { image: Assets.Json },
		".js": { image: Assets.Js },
		".css": { image: Assets.Css },
	};

let lastFileChange: number = null,
	lastElement: Element = null;

presence.on("UpdateData", async () => {
	const presenceData: PresenceData = {
			largeImageKey:
				"https://cdn.rcd.gg/PreMiD/websites/P/Pylon/assets/logo.png",
		},
		docsSelector =
			".current.tsd-kind-namespace > a, .current.tsd-parent-kind-namespace > a";

	if (document.location.pathname.startsWith("/docs/changelog"))
		presenceData.details = "Viewing the changelog";
	else if (document.location.pathname.startsWith("/docs/reference")) {
		presenceData.details = "Viewing the SDK reference";
		if (
			document.querySelector(docsSelector) &&
			(await presence.getSetting<boolean>("docname"))
		) {
			presenceData.state = Array.from(document.querySelectorAll(docsSelector))
				.map(el => el.textContent)
				.join(" - ");
		}
	} else if (document.location.pathname.startsWith("/docs/"))
		presenceData.details = "Looking at the docs";
	else if (document.location.pathname.startsWith("/studio")) {
		presenceData.details = "Studio";
		if (document.location.pathname.endsWith("editor")) {
			presenceData.smallImageKey = Assets.Pylond
			presenceData.smallImageText = "Pylon Studio Editor";
			const guildName = document.querySelector(
					"#root > div.PageStudioGuildEdit_studioContainer__2vaAW > div > div.PylonEditor_editorContainerOuter__3o4x4 > div.PylonEditor_editorContainerGridVertical__10qLF > div > div:nth-child(1) > div > div.SideBar_header__2dvwm > h3"
				).textContent,
				currentFile = document.querySelector(".TabBar_tabSelected__foMO4");
			if (currentFile) {
				const largeImageKey =
					knownExtensions[
						Object.keys(knownExtensions).find(key => {
							if (currentFile.textContent.endsWith(key)) return true;
							const match = /^\/(.*)\/([mgiy]+)$/.exec(key);
							if (!match) return false;
							return new RegExp(match[1], match[2]).test(
								currentFile.textContent
							);
						})
					];

				if (lastElement !== currentFile) {
					lastElement = currentFile;
					lastFileChange = Date.now();
				}

				presenceData.startTimestamp = lastFileChange;
				presenceData.largeImageKey = largeImageKey
					? largeImageKey.image
					: "txt";
				presenceData.details = (await presence.getSetting<string>("details"))
					.replaceAll("%file%", currentFile.textContent)
					.replaceAll("%guild%", guildName)
					.replaceAll(
						"%ext%",
						(largeImageKey ? largeImageKey.image : "txt").toUpperCase()
					);
				presenceData.state = (await presence.getSetting<string>("state"))
					.replaceAll("%file%", currentFile.textContent)
					.replaceAll("%guild%", guildName)
					.replaceAll(
						"%ext%",
						(largeImageKey ? largeImageKey.image : "txt").toUpperCase()
					);
			} else {
				presenceData.largeImageKey = Assets.Idle;
				presenceData.details = "Idling";
			}
		} else if (document.location.pathname.startsWith("/studio/guilds/")) {
			presenceData.details += ": Viewing Server";
			if (await presence.getSetting<boolean>("studioguildname")) {
				presenceData.state = document.querySelector(
					"#root > div:nth-child(4) > div.ðŸ“¦h_130px.ðŸ“¦box-szg_border-box > div.ðŸ“¦flt_left.ðŸ“¦w_340px.ðŸ“¦box-szg_border-box > div > div.ðŸ“¦flt_left.ðŸ“¦pl_0px.ðŸ“¦w_100prcnt.ðŸ“¦box-szg_border-box > div.ðŸ“¦flt_left.ðŸ“¦w_60prcnt.ðŸ“¦box-szg_border-box > div.PageStudioGuild_guildName__tgbvT"
				).textContent;
			}
		}
	}

	if (presenceData.details) presence.setActivity(presenceData);
	else presence.setActivity();
});
